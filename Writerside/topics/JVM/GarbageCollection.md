# Garbage Collection

### 垃圾回收一般有两种方式：

1. 引用计数法(Reference Counting)，为每个对象创建一个引用计数，每引用一次就+1，每当被释放时就-1.当对象的计数器为0的时候，对象就可以释放。它有一个问题，无法解决循环引用的问题。
2. 可达性分析算法(Reachability Analysis) :从 GC Roots 开始向下搜索，搜索所走过的路径称为引用 链。当一个对象到 GC Roots 没有任何引用链相连时，则证明此对象是可以 被回收的。

GC roots 是什么：

* 在虚拟机栈(栈帧中的本地变量表)中引用的对象，譬如各个线程被调用的方法堆栈中使用到的参数、局部变量、临时变量等。
* 在方法区中类静态属性引用的对象，譬如Java类的引用类型静态变量。
* 在方法区中常量引用的对象，譬如字符串常量池(String Table)里的引用。
* 在本地方法栈中JNI(即通常所说的Native方法)引用的对象。 
* Java虚拟机内部的引用，如基本数据类型对应的Class对象，一些常驻的异常对象(比如NullPointExcepiton、OutOfMemoryError)等，还有系统类加载器。 
* 所有被同步锁(synchronized关键字)持有的对象。 
* 反映Java虚拟机内部情况的JM XBean、JVM TI中注册的回调、本地代码缓存等。

